<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#ffffff">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>MindfulDay</title>
    <link rel="manifest" href="manifest.json?v=2.1">
    <link rel="stylesheet" href="style.css?v=2.3">
    <link rel="icon" type="image/png" href="lotus-icon.png">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="firebase-config.js"></script>
    <style>
        .activity-btn img {
            display: block;
            width: 40px;
            height: 40px;
            min-width: 40px;
            min-height: 40px;
        }
    </style>
</head>

<body>
    <div class="app-container">
        <!-- Panel 0: Left Panel (Reserved) -->
        <aside class="left-panel">
            <div class="timeline-background">
                <div class="timeline-visual" id="lifeVisual">
                    <div class="timeline-icon top-icon">
                        <img src="icons/baby.svg" alt="Born">
                    </div>
                    <div class="timeline-track">
                        <div class="life-progress-bar" id="lifeProgressBar"></div>
                        <div class="life-progress-text" id="lifeProgressText">Loading...</div>
                    </div>
                    <div class="timeline-icon bottom-icon">
                        <img src="icons/old.svg" alt="End">
                    </div>
                </div>
            </div>
        </aside>

        <!-- Panel 1: Main Panel (Run Mode) -->
        <main class="main-panel" id="mainPanel">
            <!-- Content Injected via JS -->
            <div class="activity-grid" id="activityGrid"></div>

            <!-- Focus View (New) -->
            <div class="focus-view" id="focusView" style="display: none;">
                <button class="close-btn" id="closeFocusBtn">&times;</button>
                <div class="focus-content">
                    <!-- Icon -->
                    <div class="focus-icon-wrapper">
                        <img id="focusIcon" src="" alt="Activity Icon">
                    </div>

                    <!-- Current Timer -->
                    <div class="focus-timer-block green-block">
                        <span class="focus-label" id="focusLabel">ACTIVITY</span>
                        <span class="focus-timer" id="focusTimer">00:00:00</span>
                    </div>

                    <!-- Day Timer -->
                    <div class="focus-timer-block orange-block">
                        <span class="focus-label">ALL DAY</span>
                        <span class="focus-timer" id="focusDayTimer">00:00:00</span>
                    </div>
                </div>
            </div>
        </main>

        <!-- Panel 1.5: Measure Panel (New) -->
        <main class="main-panel" id="measurePanel" style="display: none;">
            <div class="tab-navigation">
                <button class="tab-btn active" data-target="measureToday">Today</button>
                <button class="tab-btn" data-target="measureYesterday">Yesterday</button>
            </div>

            <div id="measureToday" class="tab-content monitor-view">
                <!-- Content Injected via JS -->
            </div>
            <div id="measureYesterday" class="tab-content monitor-view" style="display: none;">
                <div style="padding: 20px; text-align: center; color: #888;">No data for yesterday</div>
            </div>
        </main>

        <!-- Settings Panel -->
        <main class="main-panel" id="settingsPanel" style="display: none;">
            <div id="settingsContent" class="settings-container"></div>
        </main>

        <!-- Panel 2: Side Panel (Visualization) -->
        <aside class="side-panel">
            <div class="timeline-background">
                <!-- Visual Container -->
                <div class="timeline-visual" id="timelineVisual">
                    <!-- Top: Sunrise -->
                    <div class="timeline-icon top-icon">
                        <img src="icons/sunrise_time.svg" alt="Sunrise">
                    </div>

                    <div class="timeline-track">
                        <div class="timeline-progress" id="timelineProgress"></div>

                        <!-- Markers -->
                        <div class="track-marker marker-noon">
                            <img src="icons/noon_time.svg" alt="Noon">
                        </div>
                        <div class="track-marker marker-evening">
                            <img src="icons/evening_time.svg" alt="Evening">
                        </div>
                    </div>

                    <!-- Bottom: Midnight -->
                    <div class="timeline-icon bottom-icon">
                        <img src="icons/mid-night_time.svg" alt="Midnight">
                    </div>
                </div>
            </div>
        </aside>

        <!-- New Bottom Section Container -->
        <section class="bottom-section">
            <!-- Timers Row -->
            <div class="timers-capsule">
                <div class="timer-pill green-pill">
                    <span id="currentActivityLabel" class="timer-label-overlay">Ready</span>
                    <span id="currentActivityTimer">00:00</span>
                </div>
                <!-- Day Timer -->
                <div class="timer-pill orange-pill">
                    <span class="timer-label-overlay">All Day</span>
                    <span id="dayTimer">00:00:00</span>
                </div>
            </div>

            <!-- Navigation Row -->
            <nav class="bottom-nav">
                <button class="nav-btn active" data-mode="run">
                    <img src="icons/run_mode.svg" alt="Run">
                </button>
                <button class="nav-btn" data-mode="measure">
                    <img src="icons/measure_mode.svg" alt="Measure">
                </button>
                <button class="nav-btn" data-mode="settings">
                    <img src="icons/settings_mode.svg" alt="Settings">
                </button>
            </nav>
        </section>
    </div>

    <!-- Slide-to-Confirm Modal -->
    <div class="confirm-modal" id="confirmModal" style="display: none;">
        <div class="confirm-card">
            <button class="close-btn" id="closeConfirmBtn">&times;</button>

            <!-- Icon Transition (Current -> New) -->
            <div class="confirm-icon-wrapper">
                <img id="confirmCurrentIcon" src="icons/run_mode.svg" alt="Current" style="opacity: 0.5;">
                <div class="confirm-arrow">
                    <i class="ph ph-arrow-right" style="font-size: 32px; color: #ccc;"></i>
                </div>
                <img id="confirmNewIcon" src="" alt="New Activity">
            </div>

            <div class="confirm-title" id="confirmTitle">Start a new timer?</div>

            <!-- Slider Component -->
            <div class="slider-container" id="sliderContainer">
                <div class="slider-track">
                    <div class="slider-text">Slide to confirm</div>
                </div>
                <div class="slider-handle" id="sliderHandle">
                    <img src="icons/run_mode.svg" alt=">">
                </div>
            </div>

            <!-- Current Timer (Green) -->
            <div class="focus-timer-block green-block" id="confirmCurrentBlock">
                <span class="focus-label" id="confirmCurrentLabel">CURRENT</span>
                <span class="focus-timer" id="confirmCurrentTimer">00:00:00</span>
            </div>

            <!-- Day Timer (Orange) -->
            <div class="focus-timer-block orange-block" id="confirmDayBlock">
                <span class="focus-label">ALL DAY</span>
                <span class="focus-timer" id="confirmDayTimer">00:00:00</span>
            </div>
        </div>
    </div>

    <script src="app.js?v=force_13"></script>
</body>

</html>